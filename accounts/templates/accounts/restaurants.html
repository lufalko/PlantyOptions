{% extends 'accounts/main.html' %}
{% load static %}
{% block content %}

    <div id="restaurants_wrapper">



        <div id="restaurants_header">
            <div id="restaurants_searchbarIcon"></div>
            <div id="restaurants_searchbar"></div>
         </div>

        <div id="restaurants_body">

            <p id="restaurants_Adresseingabe_Headline">Restaurants in deiner NÃ¤he:</p>
            <div id="restaurants_Adresseingabe_Headline_underline"></div>
            <div id="restaurants_body_content">
                {% for i in restaurants %}

    <div class="restaurants_block">
    <div class="restaurants_img"></div>
    <div class="restaurants_name">
        <p>{{i.name}}</p>
    </div>
    <div class="restaurants_rating" >

        <p>{{i.rating}}</p>
    </div>
    <div class="restaurants_anzahl_vegetarisch">
        <p>noch nicht fertig</p>
    </div>
    <div class="restaurants_anzahl_vegan">
        <p>noch nicht fertig</p>
    </div>
    <div class="restaurants_adresse">
        <p>{{i.location}}</p>
    </div>
    </div>


{% endfor %}
        </div>
        </div>

        <div id="restaurants_aside_left">
            <div id="restaurants_filter"></div>
        </div>

        <div id="restaurants_aside_right">
            <div id="restaurants_map"></div>
        </div>

    </div>

  <div id="restaurants_background"> </div>



<script>

    let searchbarMinusWidth=30;

   function adaptSize(ele1, ele2, minusWidth , minusHeight) {
       if(typeof(minusWidth)==='undefined'){minusWidth = 0;}
        if(typeof(minusHeight)==='undefined'){minusHeight = minusWidth;}
       document.getElementById(ele1).style.width = document.getElementById(ele2).clientWidth - minusWidth + "px";
       document.getElementById(ele1).style.height = document.getElementById(ele2).clientHeight - minusHeight + "px";
   }

   window.addEventListener('resize', function() {
       adaptSize('restaurants_searchbar', 'restaurants_header',searchbarMinusWidth, 0);

   });

   adaptSize('restaurants_searchbar', 'restaurants_header', searchbarMinusWidth, 0);

   let classesNodeList = document.querySelectorAll(".restaurants_rating");
    let classes = Array.prototype.slice.call(classesNodeList).map(function(element) {
    return element.value;
});
    console.log(classesNodeList);

   function stars() {
        console.log("hallo");
    for(let j = 0; j < classesNodeList.length; j++) {


        let SternArray = new Array(5);

        let TextInsideP = classesNodeList.item(j).getElementsByTagName('p')[0].innerHTML;
        console.log(TextInsideP);

        if (TextInsideP == 0.0) {
            SternArray = [0, 0, 0, 0, 0];
        }
        if (TextInsideP == 1.0) {
            SternArray = [1, 0, 0, 0, 0];
        }
        if (TextInsideP == 2.0) {
            SternArray = [1, 1, 0, 0, 0];
        }
        if (TextInsideP == 3.0) {
            SternArray = [1, 1, 1, 0, 0];
        }
        if (TextInsideP == 4.0) {
            SternArray = [1, 1, 1, 1, 0];
        }
        if (TextInsideP == 5.0) {
            SternArray = [1, 1, 1, 1, 1];
        }
        console.log(SternArray);
        for (let i = 0; i < SternArray.length; i++) {

            let element = document.createElement("img");

            if (SternArray[i] == 1) {
                element.setAttribute('src', "{% static 'assets/stern.png' %}");
            }

            if (SternArray[i] == 0) {
                element.setAttribute('src', "{% static 'assets/stern_leer.png' %}");
            }

            element.id = 'i';
            element.className = "stars_class";

            classesNodeList.item(j).appendChild(element);
        }
    }
}

stars();



</script>



{% endblock %}